{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Gherkin Injections (CukeRust)",
  "scopeName": "cukerust.gherkin.injections",
  "injectionSelector": "L:text.gherkin, L:text.gherkin.feature, L:source.gherkin",
  "patterns": [
    { "include": "#feature" },
    { "include": "#scenario" },
    { "include": "#steps" },
    { "include": "#docstring" },
    { "include": "#table" }
  ],
  "repository": {
    "feature": {
      "patterns": [
        { "name": "keyword.control.gherkin", "match": "^(Feature|Background|Scenario Outline|Scenario|Examples):" }
      ]
    },
    "scenario": {
      "patterns": [
        { "name": "entity.name.section.gherkin.scenario.keyword", "match": "^\\s*(Scenario(?: Outline)?:)" },
        { "name": "entity.name.section.gherkin.scenario.name", "match": "^\\s*Scenario(?: Outline)?:\\s*(.+)$" }
      ]
    },
    "steps": {
      "patterns": [
        { "name": "keyword.operator.gherkin.step", "match": "^\\s*(?:Given|When|Then|And|But)\\b" },
        { "name": "string.quoted.double.gherkin.parameter", "match": "\"[^\"]*\"" },
        { "name": "constant.numeric.gherkin.parameter", "match": "(?<=\\s)[+-]?\\d+(?:\\.\\d+)?(?=\\s|$)" }
      ]
    },
    "docstring": {
      "begin": "^\\s*\"\"\"",
      "beginCaptures": { "0": { "name": "string.quoted.triple.gherkin" } },
      "end": "^\\s*\"\"\"",
      "endCaptures": { "0": { "name": "string.quoted.triple.gherkin" } },
      "name": "string.quoted.block.gherkin",
      "patterns": []
    },
    "table": {
      "patterns": [
        { "name": "meta.table.gherkin", "match": "^\\s*\|.*\|\\s*$" }
      ]
    }
  },
  "fileTypes": ["feature"]
}
